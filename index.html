<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackMarket RP - Premium</title>
    <style>
        :root { --primary: #00ff88; --secondary: #bd00ff; --bg: #0a0a0a; --card-bg: #151515; --text: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding-bottom: 50px; overflow-x: hidden; }
        header { background: #000; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--primary); position: sticky; top: 0; z-index: 100; }
        .container { max-width: 1100px; margin: 0 auto; padding: 20px; }
        
        /* Notifica√ß√£o (Toast) */
        #notification-container { position: fixed; top: 20px; right: 20px; z-index: 9999; }
        .toast { background: #1a1a1a; color: white; border-left: 5px solid var(--primary); padding: 15px 25px; margin-bottom: 10px; border-radius: 5px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); animation: slideIn 0.3s ease-out; font-weight: bold; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Bot√µes */
        .btn { padding: 10px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; border: none; transition: 0.3s; }
        .btn-buy { background: transparent; border: 1px solid var(--primary); color: var(--primary); width: 100%; }
        .btn-buy:hover { background: var(--primary); color: #000; }
        .btn-admin { background: var(--secondary); color: white; }
        .btn-save { background: #28a745; color: white; padding: 5px 10px; font-size: 0.8em; }

        /* Grid e Card */
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .product-card { background: var(--card-bg); border-radius: 12px; padding: 15px; text-align: center; border: 1px solid #222; }
        .product-img { width: 100%; height: 120px; object-fit: contain; margin-bottom: 10px; }

        /* Admin Panel */
        #admin-panel { display: none; background: #1a1a1a; padding: 25px; border-radius: 10px; border: 2px dashed var(--secondary); margin-bottom: 30px; }
        .admin-tabs { display: flex; gap: 10px; margin-bottom: 20px; overflow-x: auto; }
        .tab-btn { background: #333; color: #fff; padding: 10px; cursor: pointer; border-radius: 5px; white-space: nowrap; }
        .tab-btn.active { background: var(--secondary); }
        .admin-content { display: none; }
        .admin-content.active { display: block; }
        table { width: 100%; border-collapse: collapse; font-size: 0.8em; }
        th, td { border: 1px solid #333; padding: 8px; text-align: left; }
        input, textarea, select { background: #000; border: 1px solid #444; color: white; padding: 8px; border-radius: 4px; }

        /* Reviews */
        .review-card { background: #1a1a1a; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid var(--primary); position: relative; }
        .stars { color: #ffcc00; }
        .del-review { position: absolute; top: 10px; right: 10px; color: red; cursor: pointer; display: none; }

        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: #111; padding: 25px; width: 350px; border-radius: 15px; border: 1px solid var(--secondary); text-align: center; }
        .pix-box { background: #fff; color: #000; padding: 15px; border-radius: 8px; margin: 15px 0; font-size: 0.8em; word-break: break-all; font-family: monospace; }
    </style>
</head>
<body>

<div id="notification-container"></div>

<header>
    <h1>‚öîÔ∏è BLACKMARKET RP</h1>
    <button class="btn btn-admin" onclick="toggleCart()">üõí Carrinho: <span id="cart-count">0</span></button>
</header>

<div class="container">

    <div id="admin-panel">
        <h2 style="color:var(--secondary)">üõ† PAINEL DE CONTROLE</h2>
        <div class="admin-tabs">
            <div class="tab-btn active" onclick="openTab('tab-logs')">Logs de Vendas</div>
            <div class="tab-btn" onclick="openTab('tab-edit')">Editar Produtos</div>
            <div class="tab-btn" onclick="openTab('tab-rev')">Moderar Avalia√ß√µes</div>
        </div>

        <div id="tab-logs" class="admin-content active"><div id="logs-list"></div></div>

        <div id="tab-edit" class="admin-content">
            <table>
                <thead><tr><th>Nome</th><th>R$</th><th>Est.</th><th>URL Imagem</th><th>A√ß√£o</th></tr></thead>
                <tbody id="admin-edit-list"></tbody>
            </table>
        </div>

        <div id="tab-rev" class="admin-content">
            <p>Os bot√µes de excluir (X) aparecer√£o nas avalia√ß√µes abaixo.</p>
        </div>
    </div>

    <h2 style="border-left: 4px solid var(--primary); padding-left: 15px;">üî´ ARSENAL & DINHEIRO</h2>
    <div class="products-grid" id="store-grid"></div>

    <div class="reviews-section" style="background: #111; padding: 20px; border-radius: 10px;">
        <h2 style="color: var(--secondary)">üí¨ AVALIA√á√ïES</h2>
        <div id="reviews-list"></div>
        <hr style="border:0; border-top:1px solid #333; margin:20px 0;">
        <h3>Avaliar Loja</h3>
        <input type="text" id="rev-name" placeholder="Nick do Roblox" style="width:100%; margin-bottom:10px">
        <select id="rev-stars" style="width:100%; margin-bottom:10px; background:#000; color:#fff; padding:8px;">
            <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option><option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option><option value="3">‚≠ê‚≠ê‚≠ê</option>
        </select>
        <textarea id="rev-text" placeholder="Comente aqui..." style="width:100%; height:60px"></textarea>
        <button class="btn" style="background:var(--primary); width:100%; margin-top:10px" onclick="addReview()">ENVIAR AVALIA√á√ÉO</button>
    </div>
</div>

<div id="cart-modal" class="modal">
    <div class="modal-content">
        <div id="checkout-step-1">
            <h2>Identifica√ß√£o</h2>
            <input type="text" id="nick-roblox" placeholder="Seu Nick no Roblox" style="width:100%; margin-bottom:10px">
            <input type="text" id="nick-discord" placeholder="Seu Usu√°rio Discord" style="width:100%; margin-bottom:10px">
            <button class="btn" style="background:var(--secondary); width:100%" onclick="goToPix()">PROSSEGUIR</button>
        </div>
        <div id="checkout-step-2" style="display:none">
            <h2>Pagamento PIX</h2>
            <div class="pix-box">9c176ab9-a6d6-4311-a0ea-21dd7481227f</div>
            <p style="font-size:0.8em; color:var(--primary)">O ADM j√° registrou seu Nick para entrega!</p>
            <button class="btn" style="background:green; width:100%" onclick="finish()">CONCLUIR COMPRA</button>
        </div>
        <button class="btn" style="background:none; color:#777; margin-top:10px" onclick="toggleCart()">Cancelar</button>
    </div>
</div>

<footer><center><p onclick="adminLogin()" style="cursor:pointer; opacity:0.2; margin-top:50px">Painel Admin</p></center></footer>

<script>
    const defaultProducts = [
        { id: 1, name: "Glock G18", price: 2.50, stock: 100, img: "https://cdn-icons-png.flaticon.com/512/3400/3400282.png" },
        { id: 2, name: "AK-47 T√°tica", price: 4.50, stock: 50, img: "https://cdn-icons-png.flaticon.com/512/4119/4119853.png" },
        { id: 3, name: "Maleta 100k", price: 3.00, stock: 99, img: "https://cdn-icons-png.flaticon.com/512/2489/2489756.png" }
    ];

    let products = JSON.parse(localStorage.getItem('bm_v6_prods')) || defaultProducts;
    let logs = JSON.parse(localStorage.getItem('bm_v6_logs')) || [];
    let reviews = JSON.parse(localStorage.getItem('bm_v6_revs')) || [{name:"Sistema", stars:5, text:"Loja inaugurada!"}];
    let cart = [];
    let isAdmin = false;

    function notify(msg) {
        const container = document.getElementById('notification-container');
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.innerText = msg;
        container.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
    }

    function save() {
        localStorage.setItem('bm_v6_prods', JSON.stringify(products));
        localStorage.setItem('bm_v6_logs', JSON.stringify(logs));
        localStorage.setItem('bm_v6_revs', JSON.stringify(reviews));
        render();
    }

    function render() {
        // Loja
        document.getElementById('store-grid').innerHTML = products.map(p => `
            <div class="product-card">
                <img src="${p.img}" class="product-img">
                <h3 style="font-size:1em">${p.name}</h3>
                <p style="color:var(--primary); font-weight:bold">R$ ${p.price.toFixed(2)}</p>
                <button class="btn btn-buy" onclick="addToCart(${p.id})">COMPRAR</button>
            </div>`).join('');

        // Admin Edi√ß√£o
        document.getElementById('admin-edit-list').innerHTML = products.map(p => `
            <tr>
                <td><input type="text" id="ed-n-${p.id}" value="${p.name}" style="width:70px"></td>
                <td><input type="number" id="ed-p-${p.id}" value="${p.price}" style="width:40px"></td>
                <td><input type="number" id="ed-s-${p.id}" value="${p.stock}" style="width:30px"></td>
                <td><input type="text" id="ed-i-${p.id}" value="${p.img}" style="width:80px"></td>
                <td><button class="btn-save" onclick="updateProd(${p.id})">OK</button></td>
            </tr>`).join('');

        // Logs
        document.getElementById('logs-list').innerHTML = logs.map(l => `
            <div style="background:#000; padding:10px; margin-bottom:5px; border-radius:5px; font-size:0.75em; border-left:2px solid var(--secondary)">
                <b>${l.user}</b>: ${l.item} (R$ ${l.total})<br><small>${l.date} | Discord: ${l.discord}</small>
            </div>`).join('');

        // Avalia√ß√µes
        document.getElementById('reviews-list').innerHTML = reviews.map((r, i) => `
            <div class="review-card">
                <div class="del-review" style="display:${isAdmin?'block':'none'}" onclick="delReview(${i})">‚úñ</div>
                <div class="stars">${"‚≠ê".repeat(r.stars)}</div>
                <b>${r.name}</b>: ${r.text}
            </div>`).join('');
    }

    function addToCart(id) {
        cart.push(products.find(x => x.id === id));
        document.getElementById('cart-count').innerText = cart.length;
        notify("Item adicionado ao carrinho!");
    }

    function toggleCart() {
        const m = document.getElementById('cart-modal');
        m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
        document.getElementById('checkout-step-1').style.display = 'block';
        document.getElementById('checkout-step-2').style.display = 'none';
    }

    function goToPix() {
        const r = document.getElementById('nick-roblox').value;
        const d = document.getElementById('nick-discord').value;
        if(!r || !d || cart.length === 0) return notify("Erro: Preencha os campos ou carrinho vazio!");

        logs.unshift({
            date: new Date().toLocaleString(),
            user: r, discord: d,
            item: cart.map(i => i.name).join(", "),
            total: cart.reduce((a, b) => a + b.price, 0).toFixed(2)
        });
        save();
        document.getElementById('checkout-step-1').style.display = 'none';
        document.getElementById('checkout-step-2').style.display = 'block';
        notify("Log de venda registrado!");
    }

    function finish() {
        notify("Pedido finalizado com sucesso!");
        cart = []; document.getElementById('cart-count').innerText = "0"; toggleCart();
    }

    function adminLogin() {
        if(prompt("Acesso Restrito:") === "srleal018@gmail.com") {
            isAdmin = true;
            document.getElementById('admin-panel').style.display = 'block';
            notify("Modo Admin Ativado!");
            render();
        }
    }

    function updateProd(id) {
        const p = products.find(x => x.id === id);
        p.name = document.getElementById(`ed-n-${id}`).value;
        p.price = parseFloat(document.getElementById(`ed-p-${id}`).value);
        p.stock = parseInt(document.getElementById(`ed-s-${id}`).value);
        p.img = document.getElementById(`ed-i-${id}`).value;
        save();
        notify("Produto atualizado!");
    }

    function addReview() {
        const n = document.getElementById('rev-name').value;
        const s = document.getElementById('rev-stars').value;
        const t = document.getElementById('rev-text').value;
        if(!n || !t) return notify("Escreva seu nick e o coment√°rio!");
        reviews.unshift({name: n, stars: parseInt(s), text: t});
        save();
        document.getElementById('rev-name').value = ""; document.getElementById('rev-text').value = "";
        notify("Avalia√ß√£o enviada!");
    }

    function delReview(i) { reviews.splice(i, 1); save(); notify("Avalia√ß√£o removida!"); }

    function openTab(id) {
        document.querySelectorAll('.admin-content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    render();
</script>
</body>
</html>
